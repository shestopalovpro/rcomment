# Comment Rating - WordPress Plugin

Плагин для WordPress, который добавляет систему голосования (плюс/минус) для комментариев с современным минималистичным дизайном.

## Возможности

✅ **Современный дизайн** - Минималистичные кнопки с SVG иконками  
✅ **Универсальность** - Работает со всеми темами WordPress  
✅ **AJAX голосование** - Без перезагрузки страницы  
✅ **Защита от дублирования** - Один голос на пользователя  
✅ **Поддержка гостей** - Голосование для неавторизованных пользователей  
✅ **Темная тема** - Автоматическая адаптация к темной теме  
✅ **Адаптивный дизайн** - Отлично выглядит на всех устройствах  
✅ **Доступность** - Поддержка клавиатурной навигации  

## Установка

### Способ 1: Через админ-панель WordPress

1. Скачайте ZIP-архив плагина
2. Войдите в админ-панель WordPress
3. Перейдите в **Плагины → Добавить новый**
4. Нажмите **Загрузить плагин**
5. Выберите ZIP-файл и нажмите **Установить**
6. Активируйте плагин

### Способ 2: Вручную через FTP

1. Скачайте плагин
2. Распакуйте архив
3. Загрузите папку `comment-rating` в директорию `/wp-content/plugins/`
4. Войдите в админ-панель WordPress
5. Перейдите в **Плагины**
6. Найдите **Comment Rating** и нажмите **Активировать**

## Использование

После активации плагин автоматически добавляет кнопки голосования под каждым комментарием на вашем сайте.

### Функционал голосования

- **Плюс** - Увеличивает рейтинг комментария
- **Минус** - Уменьшает рейтинг комментария
- **Повторное нажатие** - Отменяет ваш голос
- **Смена голоса** - Нажмите на противоположную кнопку

### Для пользователей

- Авторизованные пользователи: голоса привязываются к аккаунту
- Гости: голоса привязываются к IP-адресу

## Технические детали

### Структура файлов

```
comment-rating/
├── comment-rating.php          # Основной файл плагина
├── assets/
│   ├── css/
│   │   └── comment-rating.css  # Стили
│   └── js/
│       └── comment-rating.js   # JavaScript
└── README.md                   # Документация
```

### База данных

Плагин создает таблицу `wp_comment_votes` со следующей структурой:

- `id` - Уникальный идентификатор
- `comment_id` - ID комментария
- `user_id` - ID пользователя (0 для гостей)
- `user_ip` - IP-адрес пользователя
- `vote_type` - Тип голоса (1 = плюс, -1 = минус)
- `created_at` - Дата и время голосования

### Безопасность

- ✅ WordPress nonce verification
- ✅ SQL injection prevention
- ✅ XSS protection
- ✅ User capability checks
- ✅ Rate limiting

## Требования

- WordPress 5.0 или выше
- PHP 7.0 или выше
- MySQL 5.6 или выше

## Совместимость

Плагин протестирован и совместим с:

- WordPress 6.x
- Все популярные темы WordPress
- Gutenberg и Classic Editor
- Мобильные устройства

## Часто задаваемые вопросы

**Q: Могу ли я изменить дизайн кнопок?**  
A: Да, вы можете отредактировать файл `assets/css/comment-rating.css`

**Q: Можно ли ограничить голосование только для авторизованных пользователей?**  
A: Да, добавьте проверку `is_user_logged_in()` в функцию `cr_handle_vote()`

**Q: Как удалить все данные голосований?**  
A: Деактивируйте плагин и удалите таблицу `wp_comment_votes` из базы данных

**Q: Плагин замедляет сайт?**  
A: Нет, плагин использует AJAX и оптимизированные запросы к базе данных

## Поддержка

Если у вас возникли вопросы или проблемы:

1. Проверьте консоль браузера на наличие ошибок JavaScript
2. Убедитесь, что плагин активирован
3. Проверьте, что комментарии включены на вашем сайте

## Лицензия

GPL v2 или выше

## Автор

Разработано с ❤️ для сообщества WordPress

## Changelog

### Version 1.0.0
- Первый релиз
- Базовая функциональность голосования
- Современный дизайн с SVG иконками
- AJAX обновления без перезагрузки
- Поддержка темной темы
- Адаптивный дизайн
